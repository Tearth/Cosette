@model Cosette.Tuner.Web.ViewModels.MainViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="d-flex" id="wrapper">
    <div class="bg-light border-right" id="sidebar-wrapper">
        <div class="sidebar-heading">Cosette Tuner Web</div>
        <div class="list-group list-group-flush">
            @foreach (var test in Model.Tests)
            {
                @Html.ActionLink($"{test.Id}. {test.CreationTimeUtc}", "Index", "Home", new { id = test.Id }, 
                    new { @class = "list-group-item list-group-item-action bg-light" })
            }
        </div>
    </div>

    <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <button class="btn btn-primary" id="menu-toggle">Toggle Menu</button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <h4 class="navbar-nav ml-auto mt-2 mt-lg-0">Test @Model.LastTest?.Id (@Model.LastTest?.CreationTimeUtc)</h4>
            </div>
        </nav>
        
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="all-generations-tab" data-toggle="tab" href="#all-generations" role="tab" aria-controls="all-generations" aria-selected="true">All generations</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="best-generations-tab" data-toggle="tab" href="#best-generations" role="tab" aria-controls="best-generations" aria-selected="false">Best generations</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="all-chromosomes-tab" data-toggle="tab" href="#all-chromosomes" role="tab" aria-controls="all-chromosomes" aria-selected="false">All chromosomes</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="best-chromosomes-tab" data-toggle="tab" href="#best-chromosomes" role="tab" aria-controls="best-chromosomes" aria-selected="false">Best chromosomes</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="all-generations" role="tabpanel" aria-labelledby="all-generations-tab">
                <div class="container-fluid">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th style="min-width: 170px">Creation time UTC</th>
                                <th style="min-width: 130px">Elapsed time</th>
                                <th style="min-width: 80px">Fitness</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var generation in Model.AllGenerations)
                            {
                                <tr>
                                    <th>@generation.Id</th>
                                    <td>@generation.CreationTimeUtc</td>
                                    <td>@generation.ElapsedTime.ToString("F1")</td>
                                    <td>@generation.BestFitness</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="best-generations" role="tabpanel" aria-labelledby="best-generations-tab">
                <div class="container-fluid">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th style="min-width: 170px">Creation time UTC</th>
                                <th style="min-width: 130px">Elapsed time</th>
                                <th style="min-width: 80px">Fitness</th>
                                <th>Genes</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var bestGeneration in Model.BestGenerations)
                            {
                                <tr>
                                    <th>@bestGeneration.Id</th>
                                    <td>@bestGeneration.CreationTimeUtc</td>
                                    <td>@bestGeneration.ElapsedTime.ToString("F1")</td>
                                    <td>@bestGeneration.BestFitness</td>
                                    <td>
                                        @string.Join(", ", bestGeneration.BestGenes.Select(p => $"{p.Name}={p.Value}"))
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="best-chromosomes" role="tabpanel" aria-labelledby="best-chromosomes-tab">
                <div class="container-fluid">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th style="min-width: 170px">Creation time UTC</th>
                                <th style="min-width: 130px">Elapsed time</th>
                                <th style="min-width: 80px">Fitness</th>
                                <th>Genes</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var bestChromosome in Model.BestChromosomes)
                            {
                                <tr>
                                    <th>@bestChromosome.Id</th>
                                    <td>@bestChromosome.CreationTimeUtc</td>
                                    <td>@bestChromosome.ElapsedTime.ToString("F1")</td>
                                    <td>@bestChromosome.Fitness</td>
                                    <td>
                                        @string.Join(", ", bestChromosome.Genes.Select(p => $"{p.Name}={p.Value}"))
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="all-chromosomes" role="tabpanel" aria-labelledby="all-chromosomes-tab">
                <div class="container-fluid">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th style="min-width: 170px">Creation time UTC</th>
                                <th style="min-width: 130px">Elapsed time</th>
                                <th style="min-width: 80px">Fitness</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var chromosome in Model.AllChromosomes)
                            {
                                <tr>
                                    <th>@chromosome.Id</th>
                                    <td>@chromosome.CreationTimeUtc</td>
                                    <td>@chromosome.ElapsedTime.ToString("F1")</td>
                                    <td>@chromosome.Fitness</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>